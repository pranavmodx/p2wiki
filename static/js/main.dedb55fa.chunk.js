(this.webpackJsonpp2wiki=this.webpackJsonpp2wiki||[]).push([[0],{102:function(e,t,n){e.exports=n(229)},107:function(e,t,n){},108:function(e,t,n){},132:function(e,t){},138:function(e,t){},140:function(e,t){},146:function(e,t){},147:function(e,t){},148:function(e,t){},151:function(e,t){},164:function(e,t){},165:function(e,t){},167:function(e,t){},169:function(e,t){},171:function(e,t){},186:function(e,t){},192:function(e,t){},193:function(e,t){},196:function(e,t){},199:function(e,t){},227:function(e,t){},229:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(96),c=n.n(r),i=(n(107),n(108),n(35)),l=n(36),s=n(40),u=n(37),m=n(39),f=n(97),h=n(17),d=n(98),p=n(101),b=n.n(p),g=n(61),y=n(19),v=n(153),x=["wss://tracker.openwebtorrent.com","wss://tracker.sloppyta.co:443/announce","wss://tracker.novage.com.ua:443/announce"],w={infoHash:"62f753362edbfcc2f59593a050bf271d20dec9d2",peerId:y(20),announce:x};if("true"===localStorage.getItem("beAProxy")){var k=new v,S=new File(["p2wiki"],"p2wiki");k.seed(S,{announce:x},(function(e){console.log(e.infoHash),e.on("peer",(function(e){e.on("data",(function(t){console.log("got a message from cpeer: "+t);try{var n=JSON.parse(t);b.a.get("//en.wikipedia.org/w/api.php?action=parse&format=json&page=".concat(n.q,"&prop=text&formatversion=2")).then((function(t){console.log(t),e.send(JSON.stringify(t))})).catch((function(e){console.log(e),alert("Not Found- Try with a more Specific Title")}))}catch(a){console.log("non JSON data")}}))}))}))}function E(e,t){(function(e,t){var n=!1;return new Promise((function(t,a){new g(w).on("peer",(function(o,r){n||(o.on("data",(function(e){try{var n=JSON.parse(e);t(n)}catch(a){console.log("non JSON data")}})),o.on("connect",(function(){o.send(e)})),o.on("error",(function(e){n=!1,a(Error(e))})),n=!0)}))}))})(JSON.stringify({q:e})).then((function(e){t(e)}),(function(e){console.log(e)}))}var O=function(e){function t(e){var n;if(Object(i.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).getFromWiki=function(){if(""!==n.state.query){var e=Object(h.a)(n);E(n.state.query,(function(t){e.setState({title:t.data.parse.title,result:t.data.parse.text})}))}},n.handleSubmit=function(e){e.preventDefault(),console.log(n.state.query),n.getFromWiki()},n.handleChange=n.handleChange.bind(Object(h.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(h.a)(n)),n.state={title:"",query:"",result:"",beAProxy:!1},"true"===localStorage.getItem("beAProxy")){n.state.beAProxy=!0;var a=Object(h.a)(n);setTimeout((function(){var e=document.URL;if("http://localhost:3000/wiki"!==e){var t=e.split("/").slice(-1).pop();a.urloli(t)}a.getFromWiki()}),5e3)}return n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"handleChange",value:function(e){var t="checkbox"===e.target.type?e.target.checked:e.target.value;this.setState(Object(f.a)({},e.target.name,t)),"beAProxy"===e.target.name&&(localStorage.setItem("beAProxy",t),window.location.reload())}},{key:"urloli",value:function(e){this.setState({query:e})}},{key:"render",value:function(){var e;return o.a.createElement("div",{className:"text-center md:flex md:items-center mb-6"},o.a.createElement("form",{className:"w-full max-w-sm",onSubmit:this.handleSubmit},o.a.createElement("input",{type:"checkbox",id:"beAProxy",onChange:this.handleChange,name:"beAProxy",checked:this.state.beAProxy}),o.a.createElement("label",{htmlFor:"beAProxy"},"Be A Proxy Peer"),o.a.createElement("div",{className:"w-full max-w-sm"},o.a.createElement(d.a,{className:"text-2xl text-gray-600 font-bold mb-1 md:mb-0 pr-4",htmlFor:"query"},"Search for Wikipedia Articles"),o.a.createElement("input",{id:"query",type:"Text",placeholder:"\ud83d\udd0d Search",onChange:this.handleChange,name:"query",value:this.state.query,className:" text-4xl bg-gray-200 appearance-none border-4 border-gray-200 rounded  py-2 px-4 text-gray-700 leading-tight focus:outline-none focus:bg-white focus:border-red-500"}))),o.a.createElement("div",{className:"container is-fluid"},o.a.createElement("h1",{className:"title"},this.state.title),o.a.createElement("div",{dangerouslySetInnerHTML:(e=this.state.result,{__html:e})})))}}]),t}(o.a.Component),N=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",null,o.a.createElement("h1",{style:{color:"royalblue"},className:"font-mono text-6xl text-center"},"P2Wiki"),o.a.createElement(O,null)),o.a.createElement("footer",{className:"footer"},o.a.createElement("div",{className:"content has-text-centered"},o.a.createElement("p",{className:"font-mono text-1xl p-8",style:{color:"hotpink"}},"P2Wiki made by Subin Siby, Pranav Shridhar and Athul Cyriac Ajay"))))}}]),t}(a.Component);var j=function(){return o.a.createElement("div",{className:"App"},o.a.createElement(N,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(j,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[102,1,2]]]);
//# sourceMappingURL=main.dedb55fa.chunk.js.map